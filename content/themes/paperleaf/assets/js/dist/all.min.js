function sidebarHeight(){var e=jQuery(".js-sidebar-inner").height(),t=jQuery(".js-sidebar-footer").height();jQuery(window).height()<e+t+192?jQuery(".js-sidebar-footer").addClass("sidebar-footer-static"):jQuery(".js-sidebar-footer").removeClass("sidebar-footer-static")}!function(a){var s=[],o=!1,l=!1,u={interval:250,force_process:!1},c=a(window),d=[];function h(){l=!1;for(var e,t=0,r=s.length;t<r;t++){var i,n=(e=s[t],a(e).filter(function(){return a(this).is(":appeared")}));n.trigger("appear",[n]),d[t]&&(i=d[t].not(n)).trigger("disappear",[i]),d[t]=n}}a.expr.pseudos.appeared=a.expr.createPseudo(function(e){return function(e){var t=a(e);if(!t.is(":visible"))return!1;var r=c.scrollLeft(),i=c.scrollTop(),n=t.offset(),s=n.left,o=n.top;return o+t.height()>=i&&o-(t.data("appear-top-offset")||0)<=i+c.height()&&s+t.width()>=r&&s-(t.data("appear-left-offset")||0)<=r+c.width()}}),a.fn.extend({appear:function(e,t){return a.appear(this,t),this}}),a.extend({appear:function(e,t){var r,i,n=a.extend({},u,t||{});o||(r=function(){l||(l=!0,setTimeout(h,n.interval))},a(window).scroll(r).resize(r),o=!0),n.force_process&&setTimeout(h,n.interval),i=e,s.push(i),d.push()},force_appear:function(){return!!o&&(h(),!0)}})}("undefined"!=typeof module?require("jquery"):jQuery),function(s){"use strict";s.fn.fitVids=function(e){var t,r,n={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(r.childNodes[1])),e&&s.extend(n,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];n.customSelector&&e.push(n.customSelector);var i=".fitvidsignore";n.ignore&&(i=i+", "+n.ignore);var t=s(this).find(e.join(","));(t=(t=t.not("object object")).not(i)).each(function(){var e,t,r=s(this);0<r.parents(i).length||"embed"===this.tagName.toLowerCase()&&r.parent("object").length||r.parent(".fluid-width-video-wrapper").length||(r.css("height")||r.css("width")||!isNaN(r.attr("height"))&&!isNaN(r.attr("width"))||(r.attr("height",9),r.attr("width",16)),e=("object"===this.tagName.toLowerCase()||r.attr("height")&&!isNaN(parseInt(r.attr("height"),10))?parseInt(r.attr("height"),10):r.height())/(isNaN(parseInt(r.attr("width"),10))?r.width():parseInt(r.attr("width"),10)),r.attr("name")||(t="fitvid"+s.fn.fitVids._count,r.attr("name",t),s.fn.fitVids._count++),r.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),r.removeAttr("height").removeAttr("width"))})})},s.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(b){var e,t;!function(){var t,u,c,e,r,d,h,f,p,g,m,y,v,b,x,w,k,S,L,Q,_,T,P,I,j,i,n,F=function(e){var t=new F.Builder;return t.pipeline.add(F.trimmer,F.stopWordFilter,F.stemmer),t.searchPipeline.add(F.stemmer),e.call(t,t),t.build()};function s(e){var t,r,i,n,s,o,a,l;return e.length<3||("y"==(r=e.substr(0,1))&&(e=r.toUpperCase()+e.substr(1)),a=m,(s=g).test(e)?e=e.replace(s,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),a=v,(s=y).test(e)?(l=s.exec(e),(s=d).test(l[1])&&(s=b,e=e.replace(s,""))):a.test(e)&&(o=(l=a.exec(e))[1],(a=p).test(o)&&(i=w,n=k,(a=x).test(e=o)?e+="e":i.test(e)?(s=b,e=e.replace(s,"")):n.test(e)&&(e+="e"))),(s=S).test(e)&&(e=(o=(l=s.exec(e))[1])+"i"),(s=L).test(e)&&(o=(l=s.exec(e))[1],t=l[2],(s=d).test(o)&&(e=o+u[t])),(s=Q).test(e)&&(o=(l=s.exec(e))[1],t=l[2],(s=d).test(o)&&(e=o+c[t])),a=T,(s=_).test(e)?(o=(l=s.exec(e))[1],(s=h).test(o)&&(e=o)):a.test(e)&&(o=(l=a.exec(e))[1]+l[2],(a=h).test(o)&&(e=o)),(s=P).test(e)&&(o=(l=s.exec(e))[1],a=f,i=j,((s=h).test(o)||a.test(o)&&!i.test(o))&&(e=o)),a=h,(s=I).test(e)&&a.test(e)&&(s=b,e=e.replace(s,"")),"y"==r&&(e=r.toLowerCase()+e.substr(1))),e}F.version="2.1.5",F.utils={},F.utils.warn=(t=this,function(e){t.console&&console.warn&&console.warn(e)}),F.utils.asString=function(e){return null==e?"":e.toString()},F.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},F.FieldRef.joiner="/",F.FieldRef.fromString=function(e){var t=e.indexOf(F.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var r=e.slice(0,t),i=e.slice(t+1);return new F.FieldRef(i,r,e)},F.FieldRef.prototype.toString=function(){return null==this._stringValue&&(this._stringValue=this.fieldName+F.FieldRef.joiner+this.docRef),this._stringValue},F.idf=function(e,t){var r=0;for(var i in e)"_index"!=i&&(r+=Object.keys(e[i]).length);var n=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(n))},F.Token=function(e,t){this.str=e||"",this.metadata=t||{}},F.Token.prototype.toString=function(){return this.str},F.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},F.Token.prototype.clone=function(e){return e=e||function(e){return e},new F.Token(e(this.str,this.metadata),this.metadata)},F.tokenizer=function(e){if(null==e||null==e)return[];if(Array.isArray(e))return e.map(function(e){return new F.Token(F.utils.asString(e).toLowerCase())});for(var t=e.toString().trim().toLowerCase(),r=t.length,i=[],n=0,s=0;n<=r;n++){var o=n-s;!t.charAt(n).match(F.tokenizer.separator)&&n!=r||(0<o&&i.push(new F.Token(t.slice(s,n),{position:[s,o],index:i.length})),s=n+1)}return i},F.tokenizer.separator=/[\s\-]+/,F.Pipeline=function(){this._stack=[]},F.Pipeline.registeredFunctions=Object.create(null),F.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&F.utils.warn("Overwriting existing registered function: "+t),e.label=t,F.Pipeline.registeredFunctions[e.label]=e},F.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||F.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},F.Pipeline.load=function(e){var r=new F.Pipeline;return e.forEach(function(e){var t=F.Pipeline.registeredFunctions[e];if(!t)throw new Error("Cannot load unregistered function: "+e);r.add(t)}),r},F.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){F.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},F.Pipeline.prototype.after=function(e,t){F.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");r+=1,this._stack.splice(r,0,t)},F.Pipeline.prototype.before=function(e,t){F.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r,0,t)},F.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},F.Pipeline.prototype.run=function(n){for(var e=this._stack.length,t=0;t<e;t++){var s=this._stack[t];n=n.reduce(function(e,t,r){var i=s(t,r,n);return void 0===i||""===i?e:e.concat(i)},[])}return n},F.Pipeline.prototype.runString=function(e){var t=new F.Token(e);return this.run([t]).map(function(e){return e.toString()})},F.Pipeline.prototype.reset=function(){this._stack=[]},F.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return F.Pipeline.warnIfFunctionNotRegistered(e),e.label})},F.Vector=function(e){this._magnitude=0,this.elements=e||[]},F.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,r=this.elements.length/2,i=r-t,n=Math.floor(i/2),s=this.elements[2*n];1<i&&(s<e&&(t=n),e<s&&(r=n),s!=e);)i=r-t,n=t+Math.floor(i/2),s=this.elements[2*n];return s==e||e<s?2*n:s<e?2*(n+1):void 0},F.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},F.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},F.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var i=this.elements[r];e+=i*i}return this._magnitude=Math.sqrt(e)},F.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,i=e.elements,n=r.length,s=i.length,o=0,a=0,l=0,u=0;l<n&&u<s;)(o=r[l])<(a=i[u])?l+=2:a<o?u+=2:o==a&&(t+=r[l+1]*i[u+1],l+=2,u+=2);return t},F.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},F.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},F.Vector.prototype.toJSON=function(){return this.elements},F.stemmer=(u={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},e="[aeiouy]",r="[^aeiou][^aeiouy]*",d=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),f=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),p=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),g=/^(.+?)(ss|i)es$/,m=/^(.+?)([^s])s$/,y=/^(.+?)eed$/,v=/^(.+?)(ed|ing)$/,b=/.$/,x=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),k=new RegExp("^"+r+e+"[^aeiouwxy]$"),S=/^(.+?[^aeiou])y$/,L=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,Q=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,_=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,T=/^(.+?)(s|t)(ion)$/,P=/^(.+?)e$/,I=/ll$/,j=new RegExp("^"+r+e+"[^aeiouwxy]$"),function(e){return e.update(s)}),F.Pipeline.registerFunction(F.stemmer,"stemmer"),F.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},F.stopWordFilter=F.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),F.Pipeline.registerFunction(F.stopWordFilter,"stopWordFilter"),F.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},F.Pipeline.registerFunction(F.trimmer,"trimmer"),F.TokenSet=function(){this.final=!1,this.edges={},this.id=F.TokenSet._nextId,F.TokenSet._nextId+=1},F.TokenSet._nextId=1,F.TokenSet.fromArray=function(e){for(var t=new F.TokenSet.Builder,r=0,i=e.length;r<i;r++)t.insert(e[r]);return t.finish(),t.root},F.TokenSet.fromClause=function(e){return"editDistance"in e?F.TokenSet.fromFuzzyString(e.term,e.editDistance):F.TokenSet.fromString(e.term)},F.TokenSet.fromFuzzyString=function(e,t){for(var r=new F.TokenSet,i=[{node:r,editsRemaining:t,str:e}];i.length;){var n,s,o,a,l,u,c,d,h=i.pop();0<h.str.length&&((s=h.str.charAt(0))in h.node.edges?n=h.node.edges[s]:(n=new F.TokenSet,h.node.edges[s]=n),1==h.str.length?n.final=!0:i.push({node:n,editsRemaining:h.editsRemaining,str:h.str.slice(1)})),0<h.editsRemaining&&1<h.str.length&&((s=h.str.charAt(1))in h.node.edges?o=h.node.edges[s]:(o=new F.TokenSet,h.node.edges[s]=o),h.str.length<=2?o.final=!0:i.push({node:o,editsRemaining:h.editsRemaining-1,str:h.str.slice(2)})),0<h.editsRemaining&&1==h.str.length&&(h.node.final=!0),0<h.editsRemaining&&1<=h.str.length&&("*"in h.node.edges?a=h.node.edges["*"]:(a=new F.TokenSet,h.node.edges["*"]=a),1==h.str.length?a.final=!0:i.push({node:a,editsRemaining:h.editsRemaining-1,str:h.str.slice(1)})),0<h.editsRemaining&&("*"in h.node.edges?l=h.node.edges["*"]:(l=new F.TokenSet,h.node.edges["*"]=l),0==h.str.length?l.final=!0:i.push({node:l,editsRemaining:h.editsRemaining-1,str:h.str})),0<h.editsRemaining&&1<h.str.length&&(u=h.str.charAt(0),(c=h.str.charAt(1))in h.node.edges?d=h.node.edges[c]:(d=new F.TokenSet,h.node.edges[c]=d),1==h.str.length?d.final=!0:i.push({node:d,editsRemaining:h.editsRemaining-1,str:u+h.str.slice(2)}))}return r},F.TokenSet.fromString=function(e){for(var t=new F.TokenSet,r=t,i=!1,n=0,s=e.length;n<s;n++){var o,a=e[n],l=n==s-1;"*"==a?(i=!0,(t.edges[a]=t).final=l):((o=new F.TokenSet).final=l,t.edges[a]=o,t=o,i&&(t.edges["*"]=r))}return r},F.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),i=Object.keys(r.node.edges),n=i.length;r.node.final&&e.push(r.prefix);for(var s=0;s<n;s++){var o=i[s];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},F.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,i=0;i<r;i++)var n=t[i],e=e+n+this.edges[n].id;return e},F.TokenSet.prototype.intersect=function(e){for(var t=new F.TokenSet,r=void 0,i=[{qNode:e,output:t,node:this}];i.length;){r=i.pop();for(var n=Object.keys(r.qNode.edges),s=n.length,o=Object.keys(r.node.edges),a=o.length,l=0;l<s;l++)for(var u=n[l],c=0;c<a;c++){var d,h,f,p,g=o[c];g!=u&&"*"!=u||(d=r.node.edges[g],h=r.qNode.edges[u],f=d.final&&h.final,p=void 0,g in r.output.edges?(p=r.output.edges[g]).final=p.final||f:((p=new F.TokenSet).final=f,r.output.edges[g]=p),i.push({qNode:h,output:p,node:d}))}}return t},F.TokenSet.Builder=function(){this.previousWord="",this.root=new F.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},F.TokenSet.Builder.prototype.insert=function(e){var t,r=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var i=0;i<e.length&&i<this.previousWord.length&&e[i]==this.previousWord[i];i++)r++;this.minimize(r),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(i=r;i<e.length;i++){var n=new F.TokenSet,s=e[i];t.edges[s]=n,this.uncheckedNodes.push({parent:t,char:s,child:n}),t=n}t.final=!0,this.previousWord=e},F.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},F.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;e<=t;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},F.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},F.Index.prototype.search=function(t){return this.query(function(e){new F.QueryParser(t,e).parse()})},F.Index.prototype.query=function(e){var t=new F.Query(this.fields),r=Object.create(null),i=Object.create(null),n=Object.create(null);e.call(t,t);for(var s=0;s<t.clauses.length;s++)for(var o=null,o=(l=t.clauses[s]).usePipeline?this.pipeline.runString(l.term):[l.term],a=0;a<o.length;a++){var l,u=o[a];(l=JSON.parse(JSON.stringify(l))).term=u;for(var c=F.TokenSet.fromClause(l),d=this.tokenSet.intersect(c).toArray(),h=0;h<d.length;h++){var f=d[h],p=this.invertedIndex[f];if(p)for(var g=p._index,m=0;m<l.fields.length;m++){var y=l.fields[m],v=p[y],b=Object.keys(v),x=f+"/"+y;if(void 0===i[y]&&(i[y]=new F.Vector),i[y].upsert(g,+l.boost,function(e,t){return e+t}),!n[x]){for(var w=0;w<b.length;w++){var k,S=b[w],L=new F.FieldRef(S,y),Q=v[S];void 0===(k=r[L])?r[L]=new F.MatchData(f,y,Q):k.add(f,y,Q)}n[x]=!0}}}}for(var _=Object.keys(r),T=[],P=Object.create(null),s=0;s<_.length;s++){var I,j,E=F.FieldRef.fromString(_[s]),O=E.docRef,N=this.fieldVectors[E],C=i[E.fieldName].similarity(N);void 0!==(I=P[O])?(I.score+=C,I.matchData.combine(r[E])):(j={ref:O,score:C,matchData:r[E]},P[O]=j,T.push(j))}return T.sort(function(e,t){return t.score-e.score})},F.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),t=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:F.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},F.Index.load=function(e){var t={},r={},i=e.fieldVectors,n={},s=e.invertedIndex,o=new F.TokenSet.Builder,a=F.Pipeline.load(e.pipeline);e.version!=F.version&&F.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+F.version+"' does not match serialized index '"+e.version+"'");for(var l=0;l<i.length;l++){var u=(d=i[l])[0],c=d[1];r[u]=new F.Vector(c)}for(l=0;l<s.length;l++){var d,h=(d=s[l])[0],f=d[1];o.insert(h),n[h]=f}return o.finish(),t.fields=e.fields,t.fieldVectors=r,t.invertedIndex=n,t.tokenSet=o.root,t.pipeline=a,new F.Index(t)},F.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=F.tokenizer,this.pipeline=new F.Pipeline,this.searchPipeline=new F.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},F.Builder.prototype.ref=function(e){this._ref=e},F.Builder.prototype.field=function(e){this._fields.push(e)},F.Builder.prototype.b=function(e){this._b=e<0?0:1<e?1:e},F.Builder.prototype.k1=function(e){this._k1=e},F.Builder.prototype.add=function(e){var t=e[this._ref];this.documentCount+=1;for(var r=0;r<this._fields.length;r++){var i=this._fields[r],n=e[i],s=this.tokenizer(n),o=this.pipeline.run(s),a=new F.FieldRef(t,i),l=Object.create(null);this.fieldTermFrequencies[a]=l,this.fieldLengths[a]=0,this.fieldLengths[a]+=o.length;for(var u=0;u<o.length;u++){var c=o[u];if(null==l[c]&&(l[c]=0),l[c]+=1,null==this.invertedIndex[c]){var d=Object.create(null);d._index=this.termIndex,this.termIndex+=1;for(var h=0;h<this._fields.length;h++)d[this._fields[h]]=Object.create(null);this.invertedIndex[c]=d}null==this.invertedIndex[c][i][t]&&(this.invertedIndex[c][i][t]=Object.create(null));for(var f=0;f<this.metadataWhitelist.length;f++){var p=this.metadataWhitelist[f],g=c.metadata[p];null==this.invertedIndex[c][i][t][p]&&(this.invertedIndex[c][i][t][p]=[]),this.invertedIndex[c][i][t][p].push(g)}}}},F.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,r={},i={},n=0;n<t;n++){var s=F.FieldRef.fromString(e[n]);i[o=s.fieldName]||(i[o]=0),i[o]+=1,r[o]||(r[o]=0),r[o]+=this.fieldLengths[s]}for(var o,n=0;n<this._fields.length;n++){r[o=this._fields[n]]=r[o]/i[o]}this.averageFieldLength=r},F.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),r=t.length,i=Object.create(null),n=0;n<r;n++){for(var s=F.FieldRef.fromString(t[n]),o=s.fieldName,a=this.fieldLengths[s],l=new F.Vector,u=this.fieldTermFrequencies[s],c=Object.keys(u),d=c.length,h=0;h<d;h++){var f,p,g,m=c[h],y=u[m],v=this.invertedIndex[m]._index;void 0===i[m]?(f=F.idf(this.invertedIndex[m],this.documentCount),i[m]=f):f=i[m],p=f*((this._k1+1)*y)/(this._k1*(1-this._b+this._b*(a/this.averageFieldLength[o]))+y),g=Math.round(1e3*p)/1e3,l.insert(v,g)}e[s]=l}this.fieldVectors=e},F.Builder.prototype.createTokenSet=function(){this.tokenSet=F.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},F.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new F.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},F.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},F.MatchData=function(e,t,r){for(var i=Object.create(null),n=Object.keys(r),s=0;s<n.length;s++){var o=n[s];i[o]=r[o].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i},F.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);null==this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var s=0;s<n.length;s++){var o=n[s],a=Object.keys(e.metadata[i][o]);null==this.metadata[i][o]&&(this.metadata[i][o]=Object.create(null));for(var l=0;l<a.length;l++){var u=a[l];null==this.metadata[i][o][u]?this.metadata[i][o][u]=e.metadata[i][o][u]:this.metadata[i][o][u]=this.metadata[i][o][u].concat(e.metadata[i][o][u])}}}},F.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(t in this.metadata[e])for(var i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}else this.metadata[e][t]=r},F.Query=function(e){this.clauses=[],this.allFields=e},F.Query.wildcard=new String("*"),F.Query.wildcard.NONE=0,F.Query.wildcard.LEADING=1,F.Query.wildcard.TRAILING=2,F.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=F.Query.wildcard.NONE),e.wildcard&F.Query.wildcard.LEADING&&e.term.charAt(0)!=F.Query.wildcard&&(e.term="*"+e.term),e.wildcard&F.Query.wildcard.TRAILING&&e.term.slice(-1)!=F.Query.wildcard&&(e.term=e.term+"*"),this.clauses.push(e),this},F.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},F.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},F.QueryParseError.prototype=new Error,F.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},F.QueryLexer.prototype.run=function(){for(var e=F.QueryLexer.lexText;e;)e=e(this)},F.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,i=0;i<this.escapeCharPositions.length;i++)r=this.escapeCharPositions[i],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},F.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},F.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},F.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return F.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},F.QueryLexer.prototype.width=function(){return this.pos-this.start},F.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},F.QueryLexer.prototype.backup=function(){--this.pos},F.QueryLexer.prototype.acceptDigitRun=function(){for(var e,t;47<(t=(e=this.next()).charCodeAt(0))&&t<58;);e!=F.QueryLexer.EOS&&this.backup()},F.QueryLexer.prototype.more=function(){return this.pos<this.length},F.QueryLexer.EOS="EOS",F.QueryLexer.FIELD="FIELD",F.QueryLexer.TERM="TERM",F.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",F.QueryLexer.BOOST="BOOST",F.QueryLexer.lexField=function(e){return e.backup(),e.emit(F.QueryLexer.FIELD),e.ignore(),F.QueryLexer.lexText},F.QueryLexer.lexTerm=function(e){if(1<e.width()&&(e.backup(),e.emit(F.QueryLexer.TERM)),e.ignore(),e.more())return F.QueryLexer.lexText},F.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(F.QueryLexer.EDIT_DISTANCE),F.QueryLexer.lexText},F.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(F.QueryLexer.BOOST),F.QueryLexer.lexText},F.QueryLexer.lexEOS=function(e){0<e.width()&&e.emit(F.QueryLexer.TERM)},F.QueryLexer.termSeparator=F.tokenizer.separator,F.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==F.QueryLexer.EOS)return F.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return F.QueryLexer.lexField;if("~"==t)return e.backup(),0<e.width()&&e.emit(F.QueryLexer.TERM),F.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),0<e.width()&&e.emit(F.QueryLexer.TERM),F.QueryLexer.lexBoost;if(t.match(F.QueryLexer.termSeparator))return F.QueryLexer.lexTerm}else e.escapeCharacter()}},F.QueryParser=function(e,t){this.lexer=new F.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},F.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=F.QueryParser.parseFieldOrTerm;e;)e=e(this);return this.query},F.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},F.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},F.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},F.QueryParser.parseFieldOrTerm=function(e){var t=e.peekLexeme();if(null!=t)switch(t.type){case F.QueryLexer.FIELD:return F.QueryParser.parseField;case F.QueryLexer.TERM:return F.QueryParser.parseTerm;default:var r="expected either a field or a term, found "+t.type;throw 1<=t.str.length&&(r+=" with value '"+t.str+"'"),new F.QueryParseError(r,t.start,t.end)}},F.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(null!=t){if(-1==e.query.allFields.indexOf(t.str)){var r=e.query.allFields.map(function(e){return"'"+e+"'"}).join(", "),i="unrecognised field '"+t.str+"', possible fields: "+r;throw new F.QueryParseError(i,t.start,t.end)}e.currentClause.fields=[t.str];var n=e.peekLexeme();if(null==n){i="expecting term, found nothing";throw new F.QueryParseError(i,t.start,t.end)}switch(n.type){case F.QueryLexer.TERM:return F.QueryParser.parseTerm;default:i="expecting term, found '"+n.type+"'";throw new F.QueryParseError(i,n.start,n.end)}}},F.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(null!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var r=e.peekLexeme();if(null!=r)switch(r.type){case F.QueryLexer.TERM:return e.nextClause(),F.QueryParser.parseTerm;case F.QueryLexer.FIELD:return e.nextClause(),F.QueryParser.parseField;case F.QueryLexer.EDIT_DISTANCE:return F.QueryParser.parseEditDistance;case F.QueryLexer.BOOST:return F.QueryParser.parseBoost;default:var i="Unexpected lexeme type '"+r.type+"'";throw new F.QueryParseError(i,r.start,r.end)}else e.nextClause()}},F.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var i="edit distance must be numeric";throw new F.QueryParseError(i,t.start,t.end)}e.currentClause.editDistance=r;var n=e.peekLexeme();if(null!=n)switch(n.type){case F.QueryLexer.TERM:return e.nextClause(),F.QueryParser.parseTerm;case F.QueryLexer.FIELD:return e.nextClause(),F.QueryParser.parseField;case F.QueryLexer.EDIT_DISTANCE:return F.QueryParser.parseEditDistance;case F.QueryLexer.BOOST:return F.QueryParser.parseBoost;default:i="Unexpected lexeme type '"+n.type+"'";throw new F.QueryParseError(i,n.start,n.end)}else e.nextClause()}},F.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var i="boost must be numeric";throw new F.QueryParseError(i,t.start,t.end)}e.currentClause.boost=r;var n=e.peekLexeme();if(null!=n)switch(n.type){case F.QueryLexer.TERM:return e.nextClause(),F.QueryParser.parseTerm;case F.QueryLexer.FIELD:return e.nextClause(),F.QueryParser.parseField;case F.QueryLexer.EDIT_DISTANCE:return F.QueryParser.parseEditDistance;case F.QueryLexer.BOOST:return F.QueryParser.parseBoost;default:i="Unexpected lexeme type '"+n.type+"'";throw new F.QueryParseError(i,n.start,n.end)}else e.nextClause()}},i=this,n=function(){return F},"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=F:i.lunr=F}(),e=this,t=function(e){function l(e,t){for(var r=-1,i=e.length;++r<i;)t(e[r],r,e)}function n(e,i){var n=Array(e.length);return l(e,function(e,t,r){n.push(i(e,t,r))}),n}function s(e,i,n){return l(e,function(e,t,r){n=i(e,t,r)}),n}function r(e,t){return e.charAt(t)}function u(e,t){return e[t]}function t(i,n){var s,o,t,a;if("string"==typeof i&&"string"==typeof n)a=r;else{if("object"!=typeof i||"object"!=typeof n)throw"Levensthtein: input must be two strings or two arrays";a=u}return t=this._matrix=[],i==n?this.distance=0:""==i?this.distance=n.length:""==n?this.distance=i.length:(s=[0],l(i,function(e,t){s[++t]=t}),t[0]=s,l(n,function(e,r){o=[++r],l(i,function(e,t){a(i,++t-1)==a(n,r-1)?o[t]=s[t-1]:o[t]=Math.min(s[t]+1,o[t-1]+1,s[t-1]+1)}),s=o,t[t.length]=s}),this.distance=o[o.length-1])}return t.prototype.toString=t.prototype.inspect=function(){for(var e=this.getMatrix(),t=s(e,function(e,t){return Math.max(e,s(t,Math.max,0))},0),r=Array((t+"").length).join(" "),i=[];i.length<(e[0]&&e[0].length||0);)i[i.length]=Array(r.length+1).join("-");return i=i.join("-+")+"-",n(e,function(e){return n(e,function(e){return(r+e).slice(-r.length)}).join(" |")+" "}).join("\n"+i+"\n")},t.prototype.getSteps=function(){for(var e,t,r,i,n=[],s=this.getMatrix(),o=s.length-1,a=s[0].length-1;0!==o||0!==a;)e=0<a?s[o][a-1]:Number.MAX_VALUE,t=0<o?s[o-1][a]:Number.MAX_VALUE,r=0<a&&0<o?s[o-1][a-1]:Number.MAX_VALUE,(i=Math.min(e,t,r))===r?(r<s[o][a]&&n.push(["substitute",a,o]),o--,a--):i===t?(n.push(["insert",a,o]),o--):(n.push(["delete",a,o]),a--);return n},t.prototype.getMatrix=function(){return this._matrix.slice()},t.prototype.valueOf=function(){return this.distance},t},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t()}):"object"==typeof module&&module&&module.exports?module.exports=t():e.Levenshtein=t(),b.fn.ghostHunter=function(e){var t=b.extend({},b.fn.ghostHunter.defaults,e);if(t.results)return s.init(this,t),s},b.fn.ghostHunter.defaults={resultsData:!1,onPageLoad:!1,onKeyUp:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p><h2>{{title}}</h2><h4>{{prettyPubDate}}</h4></p></a>",info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,filterfields:!1,subpath:"",item_preprocessor:!1,indexing_start:!1,indexing_end:!1,includebodysearch:!1};function i(e){return e.replace(/^\//,"").replace(/\//g,"-")}function x(){b(".gh-search-item").each(function(){var e=this.getAttribute("id").replace(/^new-/,"");this.setAttribute("id",e)})}function n(){this.blogData={},this.latestPost=0;var e="/ghost/api/v2/content/posts/?key="+ghosthunter_key+"&limit=all&include=tags",t={limit:"all",include:"tags"};this.includebodysearch?(t.formats=["plaintext"],e+="&formats=plaintext"):t.formats=[""];var l=this;b.get(e).done(function(e){var t=e.posts;l.index=lunr(function(){this.ref("id"),this.field("title"),this.field("description"),l.includebodysearch&&this.field("plaintext"),this.field("pubDate"),this.field("tag"),t.forEach(function(e){var t=new Date(e.updated_at).getTime();new Date(l.latestPost).getTime()<t&&(l.latestPost=e.updated_at);var r=e.tags.map(function(e){return e.name});null==e.meta_description&&(e.meta_description="");var i=r.join(", ");i.length<1&&(i="undefined");var n={id:String(e.id),title:String(e.title),description:String(e.custom_excerpt),pubDate:String(e.published_at),tag:i};l.includebodysearch&&(n.plaintext=String(e.plaintext)),this.add(n);var s,o,a=l.subpath+e.url;l.blogData[e.id]={title:e.title,description:e.custom_excerpt,pubDate:(s=n.pubDate,(o=new Date(s)).getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]+" "+o.getFullYear()),link:a,tags:r},l.item_preprocessor&&Object.assign(l.blogData[e.id],l.item_preprocessor(e))},this)});try{var r=i(l.subpath);localStorage.setItem("ghost_"+r+"_lunrIndex",JSON.stringify(l.index)),localStorage.setItem("ghost_"+r+"_blogData",JSON.stringify(l.blogData)),localStorage.setItem("ghost_"+r+"_latestPost",l.latestPost)}catch(e){console.warn("ghostHunter: save to localStorage failed: "+e)}l.indexing_end&&l.indexing_end(),l.isInit=!0})}var r=null,s={isInit:!1,init:function(t,e){var r=this;r.target=t,Object.assign(this,e),e.onPageLoad?window.setTimeout(function(){r.loadAPI()},1):t.focus(function(){r.loadAPI()}),t.closest("form").submit(function(e){e.preventDefault(),r.find(t.val())}),e.onKeyUp&&(t.keydown(function(e){if(13===e.which)return!1}),t.keyup(function(e){r.find(t.val())}))},loadAPI:function(){if(!this.isInit){this.indexing_start&&this.indexing_start();try{var e=i(this.subpath);this.index=localStorage.getItem("ghost_"+e+"_lunrIndex"),this.blogData=localStorage.getItem("ghost_"+e+"_blogData"),this.latestPost=localStorage.getItem("ghost_"+e+"_latestPost"),this.latestPost&&this.index&&this.blogData&&(this.latestPost=this.latestPost,this.index=lunr.Index.load(JSON.parse(this.index)),this.blogData=JSON.parse(this.blogData),this.isInit=!0)}catch(e){console.warn("ghostHunter: retrieve from localStorage failed: "+e)}}var t,r;this.isInit?(this.latestPost.replace(/\..*/,"").replace(/T/," "),t="/ghost/api/v2/content/posts/?key="+ghosthunter_key+"&limit=all&fields=id&filterupdated_at:>'"+this.latestPost.replace(/\..*/,"").replace(/T/," ")+"'",r=this,b.get(t).done(function(e){0<e.posts.length?n.call(r):(r.indexing_end&&r.indexing_end(),r.isInit=!0)})):n.call(this)},find:function(v){clearTimeout(r),v=(v=v||"").toLowerCase(),r=setTimeout(function(){for(var e=[],t=v.split(/\s+/),r=0,i=t.length;r<i;r++){var n=t[r];n&&e.push(this.index.query(function(e){e.term(n,{usePipeline:!0,boost:100}),e.term(n,{usePipeline:!1,boost:10,wildcard:lunr.Query.wildcard.TRAILING}),e.term(n,{usePipeline:!1,editDistance:1,boost:1})}))}if(1<e.length)for(var s=e[0],e=e.slice(1),r=s.length-1;-1<r;r--){var o=s[r].ref;for(j=0,jlen=e.length;j<jlen;j++){for(var a={},l=0,u=e[j].length;l<u;l++)a[e[j][l].ref]=!0;if(!a[o]){s=s.slice(0,r).concat(s.slice(r+1));break}}}else s=1===e.length?e[0]:[];var c=b(this.results),d=[];0===s.length?(c.empty(),this.displaySearchInfo&&this.zeroResultsInfo&&c.append(this.format(this.info_template,{amount:0}))):this.displaySearchInfo&&(0<c.length?c.children().eq(0).replaceWith(this.format(this.info_template,{amount:s.length})):c.append(this.format(this.info_template,{amount:s.length}))),this.before&&this.before();for(r=0;r<s.length;r++){var h=s[r].ref,f=this.blogData[h];f?(f.ref=h,d.push(f)):console.warn("ghostHunter: index/data mismatch. Ouch.")}var p=b(".gh-search-item"),g=p.map(function(){return this.id.slice(3)}).get();if(0===g.length){for(r=0,i=d.length;r<i;r++)c.append(this.format(this.result_template,d[r]));x()}else{for(var m=[],r=0,i=s.length;r<i;r++)m.push(s[r].ref);var y=new Levenshtein(g,m).getSteps();(function(e,t,r){for(var i=0,n=r.length;i<n;i++){var s,o,a,l,u=r[i];"delete"==u[0]?e.eq(u[1]-1).remove():(s=t[u[2]-1].ref,o=this.blogData[s],a=this.format(this.result_template,o),"substitute"===u[0]?e.eq(u[1]-1).replaceWith(a):"insert"===u[0]&&(l=0===u[1]?null:u[1]-1,e.eq(l).after(a)))}x()}).call(this,p,s,y)}this.onComplete&&this.onComplete(d)}.bind(this),100)},clear:function(){b(this.results).empty(),this.target.val("")},format:function(e,i){return e.replace(/{{([^{}]*)}}/g,function(e,t){var r=i[t];return"string"==typeof r||"number"==typeof r?r:e})}}}(jQuery),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Lightense=t():e.Lightense=t()}(window,function(){return i={},n.m=r=[function(e,t){function d(n){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},t=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),t.forEach(function(e){var t,r,i;t=n,i=s[r=e],r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i})}return n}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(){"use strict";var r,v=window,b=document,x={time:300,padding:40,offset:40,keyboard:!0,cubicBezier:"cubic-bezier(.2, 0, .1, 1)",background:"rgba(255, 255, 255, .98)",zIndex:1e6,beforeShow:void 0,afterShow:void 0,beforeHide:void 0,afterHide:void 0},w={};function s(e){var t=w[e];if(t){if("function"!=typeof t)throw"config.".concat(e," must be a function!");Reflect.apply(t,w,[w])}}function i(t){t.src&&!t.classList.contains("lightense-target")&&(t.classList.add("lightense-target"),t.addEventListener("click",function(e){return w.keyboard&&(e.metaKey||e.ctrlKey)?v.open(t.src,"_blank"):void function(e){if(w.target=e,w.target.classList.contains("lightense-open"))return l();var r,i,n;s("beforeShow"),w.scrollY=v.scrollY,r=w.target,i="transitionend",n=function(){s("afterShow")},r.addEventListener(i,function e(t){Reflect.apply(n,this,t),r.removeEventListener(i,e)});var t=new Image;t.onload=function(){!function(e){var t=e.width,r=e.height,i=v.pageYOffset||b.documentElement.scrollTop||0,n=v.pageXOffset||b.documentElement.scrollLeft||0,s=w.target.getBoundingClientRect(),o=t/s.width,a=v.innerWidth||b.documentElement.clientWidth||0,l=v.innerHeight||b.documentElement.clientHeight||0,u=w.target.getAttribute("data-lightense-padding")||w.target.getAttribute("data-padding")||w.padding,c=u<a?a-u:a-x.padding,d=u<l?l-u:l-x.padding,h=t/r,f=c/d;w.scaleFactor=t<c&&r<d?o:h<f?d/r*o:c/t*o;var p=a/2,g=i+l/2,m=s.left+n+s.width/2,y=s.top+i+s.height/2;w.translateX=Math.round(p-m),w.translateY=Math.round(g-y)}(this),function(){w.target.classList.add("lightense-open"),w.wrap=b.createElement("div"),w.wrap.className="lightense-wrap",setTimeout(function(){w.target.style.transform="scale("+w.scaleFactor+")"},20),w.target.parentNode.insertBefore(w.wrap,w.target),w.wrap.appendChild(w.target),setTimeout(function(){w.wrap.style.transform="translate3d("+w.translateX+"px, "+w.translateY+"px, 0)"},20);var e={cubicBezier:w.target.getAttribute("data-lightense-cubic-bezier")||w.cubicBezier,background:w.target.getAttribute("data-lightense-background")||w.target.getAttribute("data-background")||w.background,zIndex:w.target.getAttribute("data-lightense-z-index")||w.zIndex},t=d({},w,e);a("lightense-images-css-computed","\n    :root {\n      --lightense-z-index: ".concat(t.zIndex-1,";\n      --lightense-backdrop: ").concat(t.background,";\n      --lightense-duration: ").concat(t.time,"ms;\n      --lightense-timing-func: ").concat(t.cubicBezier,";\n      --lightense-backdrop-safari: ").concat(o(t.background),";\n    }")),w.container.style.visibility="visible",setTimeout(function(){w.container.style.opacity="1"},20)}(),v.addEventListener("keyup",c,!1),v.addEventListener("scroll",u,!1),w.container.addEventListener("click",l,!1)},t.src=w.target.src}(this)},!1))}function o(e){var t,r,i=/^#([A-Fa-f0-9]{3}){1,2}$/.test(t=e)?(3===(r=t.substring(1).split("")).length&&(r=[r[0],r[0],r[1],r[1],r[2],r[2]]),"rgba("+[(r="0x"+r.join(""))>>16&255,r>>8&255,255&r].join(", ")+", 1)"):/(rgb\((?:\d{1,3}[,)] ?){3}(?:\d?\.\d+\))?)/.test(t)?t.replace(")",", 1)"):/(rgba\((?:\d{1,3}[,)] ?){3}(?:\d?\.\d+\))?)/.test(t)?t:x.background,n=/([\d.]+)\)$/g,s=n.exec(i)[1];return i.replace(n,.7*s+")")}function a(e,t){var r=b.head||b.getElementsByTagName("head")[0];b.getElementById(e)&&b.getElementById(e).remove();var i=b.createElement("style");i.id=e,i.styleSheet?i.styleSheet.cssText=t:i.appendChild(b.createTextNode(t)),r.appendChild(i)}function l(){s("beforeHide"),v.removeEventListener("keyup",c,!1),v.removeEventListener("scroll",u,!1),w.container.removeEventListener("click",l,!1),w.target.classList.remove("lightense-open"),w.wrap.style.transform="",w.target.style.transform="",w.target.classList.add("lightense-transitioning"),w.container.style.opacity="",setTimeout(function(){s("afterHide"),w.container.style.visibility="",w.container.style.backgroundColor="",w.wrap.parentNode.replaceChild(w.target,w.wrap),w.target.classList.remove("lightense-transitioning")},w.time)}function u(){Math.abs(w.scrollY-v.scrollY)>=w.offset&&l()}function c(e){e.preventDefault(),27===e.keyCode&&l()}return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r=function(e){switch(n(e)){case"undefined":throw"You need to pass an element!";case"string":return b.querySelectorAll(e);case"object":return e}}(e),w=d({},x,t),a("lightense-images-css","\n:root {\n  --lightense-z-index: ".concat(w.zIndex-1,";\n  --lightense-backdrop: ").concat(w.background,";\n  --lightense-backdrop-safari: ").concat(o(w.background),";\n  --lightense-duration: ").concat(w.time,"ms;\n  --lightense-timing-func: ").concat(w.cubicBezier,";\n}\n\n.lightense-backdrop {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: calc(var(--lightense-z-index) - 1);\n  padding: 0;\n  margin: 0;\n  transition: opacity var(--lightense-duration) ease;\n  cursor: zoom-out;\n  opacity: 0;\n  background-color: var(--lightense-backdrop);\n  visibility: hidden;\n}\n\n@supports (-webkit-backdrop-filter: blur(30px)) {\n  .lightense-backdrop {\n    background-color: var(--lightense-backdrop-safari);\n    -webkit-backdrop-filter: blur(30px);\n  }\n}\n\n@supports (backdrop-filter: blur(30px)) {\n  .lightense-backdrop {\n    background-color: var(--lightense-backdrop-safari);\n    backdrop-filter: blur(30px);\n  }\n}\n\n.lightense-wrap {\n  position: relative;\n  transition: transform var(--lightense-duration) var(--lightense-timing-func);\n  z-index: var(--lightense-z-index);\n  pointer-events: none;\n}\n\n.lightense-target {\n  cursor: zoom-in;\n  transition: transform var(--lightense-duration) var(--lightense-timing-func);\n  pointer-events: auto;\n}\n\n.lightense-open {\n  cursor: zoom-out;\n}\n\n.lightense-transitioning {\n  pointer-events: none;\n}")),b.querySelector(".lightense-backdrop")||(w.container=b.createElement("div"),w.container.className="lightense-backdrop",b.body.appendChild(w.container)),function(e){var t=e.length;if(t)for(var r=0;r<t;r++)i(e[r]);else i(e)}(r)}}();e.exports=r}],n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0);function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,i}),function(i){"use strict";i(document).ready(function(){i(".post-content").fitVids();var e=i(".js-grid").imagesLoaded(function(){e.masonry({itemSelector:".post",percentPosition:!0,transitionDuration:"0.25s"}),i.force_appear()});i(".post--grid").appear(),i(".post--grid").on("appear",function(e,t){i(this).addClass("animate")}),i("body").imagesLoaded(function(){i(".js-loader").fadeOut(250)});i(".search-field").ghostHunter({results:".content-area",info_template:'<h1 class="page-title mt0">Number of posts found: {{amount}}</h1>',result_template:'<article id="gh-{{ref}}" class="animate border-box post--grid gh-search-item"><div class="p3 bg-white box-shadow"><header class="post-header"><h2 class="post-title mt0 mb0 break-word"><a class="black" href="{{link}}">{{title}}</a></h2></header></div></article>',before:function(){i(".pagination, .content").remove()}});i(window).on("resize",function(e){sidebarHeight()}),sidebarHeight(),i(".js-toggle-nav").on("click",function(e){e.preventDefault(),i(this).toggleClass("open"),i(".js-nav").toggleClass("is-visible")});var t=getParameterByName("action"),r=getParameterByName("stripe");"subscribe"==t&&i("body").addClass("subscribe-success"),"signup"==t&&(window.location="/signup/?action=checkout"),"checkout"==t&&i("body").addClass("signup-success"),"signin"==t&&i("body").addClass("signin-success"),"success"==r&&i("body").addClass("checkout-success"),"cancel"==r&&i("body").addClass("checkout-cancel"),"billing-update-success"==r&&i("body").addClass("billing-success"),"billing-update-cancel"==r&&i("body").addClass("billing-cancel"),i(".notification-close").click(function(){i(this).parent().addClass("close");var e,t=window.location.toString();0<t.indexOf("?")&&(e=t.substring(0,t.indexOf("?")),window.history.replaceState({},document.title,e))})})}(jQuery),window.addEventListener("load",function(){Lightense(".kg-gallery-image img",{padding:56,offset:20,background:"rgba(255, 255, 255, .85)"})},!1);var gallery_images=document.querySelectorAll(".kg-gallery-image img");function getParameterByName(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}gallery_images.forEach(function(e){var t=e.closest(".kg-gallery-image"),r=e.attributes.width.value/e.attributes.height.value;t.style.flex=r+" 1 0%"});
//# sourceMappingURL=all.min.js.map
